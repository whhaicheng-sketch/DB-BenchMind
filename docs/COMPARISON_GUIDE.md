# DB-BenchMind å¯¹æ¯”åŠŸèƒ½æŒ‡å—

**ç‰ˆæœ¬**: 1.0.0
**æ›´æ–°æ—¥æœŸ**: 2026-01-30

---

## ç›®å½•

1. [åŠŸèƒ½æ¦‚è¿°](#åŠŸèƒ½æ¦‚è¿°)
2. [GUI ä½¿ç”¨æŒ‡å—](#gui-ä½¿ç”¨æŒ‡å—)
3. [API ä½¿ç”¨æŒ‡å—](#api-ä½¿ç”¨æŒ‡å—)
4. [å¯¹æ¯”åœºæ™¯](#å¯¹æ¯”åœºæ™¯)
5. [ç»“æœè§£è¯»](#ç»“æœè§£è¯»)
6. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## åŠŸèƒ½æ¦‚è¿°

DB-BenchMind çš„å¯¹æ¯”åŠŸèƒ½å…è®¸æ‚¨æ¨ªå‘å¯¹æ¯”å¤šä¸ªå†å²åŸºå‡†æµ‹è¯•è®°å½•ï¼Œå¿«é€Ÿè¯†åˆ«æ€§èƒ½å·®å¼‚ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **å¤šé…ç½®å¯¹æ¯”**: ä¸€æ¬¡æ€§å¯¹æ¯” 2-10 æ¡å†å²è®°å½•
- **çµæ´»åˆ†ç»„**: æŒ‰çº¿ç¨‹æ•°ã€æ•°æ®åº“ç±»å‹ã€æ¨¡æ¿åç§°æˆ–æ—¥æœŸåˆ†ç»„
- **ä¸°å¯ŒæŒ‡æ ‡**: TPSã€å»¶è¿Ÿï¼ˆmin/avg/max/P95/P99ï¼‰ã€QPSã€è¯»å†™æ¯”ä¾‹
- **å¯è§†åŒ–å±•ç¤º**: ASCII è¡¨æ ¼å’ŒæŸ±çŠ¶å›¾
- **æœç´¢è¿‡æ»¤**: å¿«é€Ÿç­›é€‰ç›®æ ‡è®°å½•
- **å¤šæ ¼å¼å¯¼å‡º**: æ”¯æŒ TXTã€Markdownã€CSV æ ¼å¼ï¼ˆå³å°†æ¨å‡ºï¼‰

### åº”ç”¨åœºæ™¯

1. **æ€§èƒ½è°ƒä¼˜**: å¯¹æ¯”ä¸åŒçº¿ç¨‹æ•°ã€ä¸åŒé…ç½®ä¸‹çš„æ€§èƒ½è¡¨ç°
2. **æ•°æ®åº“å¯¹æ¯”**: å¯¹æ¯” MySQLã€PostgreSQLã€Oracle ç­‰ä¸åŒæ•°æ®åº“çš„æ€§èƒ½
3. **ç‰ˆæœ¬å¯¹æ¯”**: å¯¹æ¯”æ•°æ®åº“å‡çº§å‰åçš„æ€§èƒ½å·®å¼‚
4. **å›å½’æµ‹è¯•**: ç¡®ä¿æ–°ç‰ˆæœ¬æ²¡æœ‰å¼•å…¥æ€§èƒ½å›å½’
5. **å®¹é‡è§„åˆ’**: è¯„ä¼°ä¸åŒé…ç½®ä¸‹çš„æ€§èƒ½ä¸Šé™

---

## GUI ä½¿ç”¨æŒ‡å—

### å¯åŠ¨åº”ç”¨

```bash
cd /path/to/DB-BenchMind
./bin/db-benchmind gui
```

### ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DB-BenchMind                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Connections â”‚ Templates â”‚ Tasks & Monitor â”‚ History â”‚         â”‚
â”‚  Comparison â”‚ Reports â”‚ Settings                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Configuration & Selection                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Filter by:                                             â”‚   â”‚
â”‚  â”‚ [Search...]                    Group By: [Threads â–¼]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜‘ MySQL | Sysbench OLTP | 4 threads | 1250 TPS      â”‚   â”‚
â”‚  â”‚ â˜ MySQL | Sysbench OLTP | 8 threads | 2100 TPS      â”‚   â”‚
â”‚  â”‚ â˜‘ PostgreSQL | Sysbench OLTP | 8 threads | 1980 TPS  â”‚   â”‚
â”‚  â”‚ ...                                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  [ğŸ”„ Refresh] [ğŸ“Š Compare Selected] [ğŸ’¾ Export Report] [ğŸ—‘ï¸ Clear] â”‚
â”‚  Comparison Results:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚   â”‚
â”‚  â”‚ â•‘       Multi-Configuration Comparison Results       â•‘ â”‚   â”‚
â”‚  â”‚ â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚   â”‚
â”‚  â”‚ â•‘ Summary...                                         â•‘ â”‚   â”‚
â”‚  â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åŸºæœ¬æ“ä½œ

#### 1. é€‰æ‹©è®°å½•

åœ¨è®°å½•åˆ—è¡¨ä¸­ï¼Œå‹¾é€‰æ‚¨æƒ³è¦å¯¹æ¯”çš„è®°å½•ï¼ˆ2-10 æ¡ï¼‰ã€‚

æ¯æ¡è®°å½•æ˜¾ç¤ºï¼š
- æ•°æ®åº“ç±»å‹
- æ¨¡æ¿åç§°
- çº¿ç¨‹æ•°
- TPSï¼ˆæ¯ç§’äº‹åŠ¡æ•°ï¼‰
- QPSï¼ˆæ¯ç§’æŸ¥è¯¢æ•°ï¼‰
- å¼€å§‹æ—¶é—´

#### 2. é€‰æ‹©åˆ†ç»„æ–¹å¼

ä» "Group By" ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©åˆ†ç»„æ–¹å¼ï¼š

| åˆ†ç»„æ–¹å¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|---------|------|----------|
| **Threads** | æŒ‰çº¿ç¨‹æ•°å‡åºæ’åˆ— | å¯¹æ¯”ä¸åŒå¹¶å‘æ•°çš„æ€§èƒ½ |
| **Database Type** | æŒ‰æ•°æ®åº“ç±»å‹åˆ†ç»„ | å¯¹æ¯”ä¸åŒæ•°æ®åº“çš„æ€§èƒ½ |
| **Template Name** | æŒ‰æ¨¡æ¿åç§°åˆ†ç»„ | å¯¹æ¯”ä¸åŒæµ‹è¯•ç±»å‹çš„æ€§èƒ½ |
| **Date** | æŒ‰å¼€å§‹æ—¶é—´æ’åˆ— | å¯¹æ¯”å†å²è¶‹åŠ¿ |

#### 3. æ‰§è¡Œå¯¹æ¯”

ç‚¹å‡» "ğŸ“Š Compare Selected" æŒ‰é’®ï¼Œç³»ç»Ÿå°†ï¼š
1. éªŒè¯é€‰æ‹©çš„è®°å½•æ•°ï¼ˆ2-10 æ¡ï¼‰
2. æŒ‰ç…§é€‰æ‹©çš„åˆ†ç»„æ–¹å¼æ’åº
3. è®¡ç®—å„é¡¹æŒ‡æ ‡çš„ç»Ÿè®¡å€¼
4. ç”Ÿæˆå¯¹æ¯”è¡¨æ ¼å’Œå›¾è¡¨

#### 4. æŸ¥çœ‹ç»“æœ

ç»“æœåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

**æ‘˜è¦ä¿¡æ¯**
```
## Summary

Total Records: 3
Group By: threads
```

**TPS å¯¹æ¯”è¡¨æ ¼**
```
## TPS Comparison (Transactions Per Second)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Configuration                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Config              â”‚       Min â”‚       Avg â”‚       Max â”‚   StdDev â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MySQL (4 threads)   â”‚   1250.50 â”‚   2100.30 â”‚   3500.80 â”‚   1125.15 â”‚
â”‚ MySQL (8 threads)   â”‚   1980.20 â”‚   2100.30 â”‚   3500.80 â”‚    760.30 â”‚
â”‚ MySQL (16 threads)  â”‚   3500.80 â”‚   3500.80 â”‚   3500.80 â”‚      0.00 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å»¶è¿Ÿå¯¹æ¯”è¡¨æ ¼**
```
## Latency Comparison (ms)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Configuration (Avg Latency)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Config              â”‚       Min â”‚       Avg â”‚       Max â”‚   StdDev â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MySQL (4 threads)   â”‚      6.80 â”‚      8.20 â”‚      9.10 â”‚      1.15 â”‚
â”‚ MySQL (8 threads)   â”‚      6.80 â”‚      7.85 â”‚      9.10 â”‚      1.15 â”‚
â”‚ MySQL (16 threads)  â”‚      6.80 â”‚      6.80 â”‚      6.80 â”‚      0.00 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**TPS æŸ±çŠ¶å›¾**
```
## TPS Bar Chart

MySQL (4 threads)   â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 1250.50
MySQL (8 threads)   â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 2100.30
MySQL (16 threads)  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 3500.80
```

**æŸ¥è¯¢åˆ†å¸ƒ**
```
## Query Distribution

  Read:  30048 queries (66.7%)
  Write: 15024 queries (33.3%)
```

#### 5. æœç´¢è¿‡æ»¤

ä½¿ç”¨æœç´¢æ¡†å¿«é€Ÿè¿‡æ»¤è®°å½•ï¼š

- è¾“å…¥ "MySQL" - åªæ˜¾ç¤º MySQL ç›¸å…³è®°å½•
- è¾“å…¥ "8 threads" - åªæ˜¾ç¤º 8 çº¿ç¨‹çš„è®°å½•
- è¾“å…¥ "oltp" - åªæ˜¾ç¤º OLTP ç›¸å…³çš„è®°å½•

æœç´¢æ”¯æŒï¼šæ•°æ®åº“ç±»å‹ã€æ¨¡æ¿åç§°ã€è¿æ¥åã€çº¿ç¨‹æ•°çš„æ¨¡ç³ŠåŒ¹é…ã€‚

#### 6. å¯¼å‡ºæŠ¥å‘Š

ç‚¹å‡» "ğŸ’¾ Export Report" æŒ‰é’®ï¼Œé€‰æ‹©å¯¼å‡ºæ ¼å¼ï¼š
- **TXT**: çº¯æ–‡æœ¬æ ¼å¼
- **Markdown**: Markdown æ ¼å¼ï¼ˆæ¨èï¼‰
- **CSV**: CSV æ ¼å¼ï¼ˆä¾¿äº Excel åˆ†æï¼‰

---

## API ä½¿ç”¨æŒ‡å—

### åˆå§‹åŒ–

```go
import (
    "context"
    "github.com/whhaicheng/DB-BenchMind/internal/app/usecase"
    "github.com/whhaicheng/DB-BenchMind/internal/infra/database/repository"
)

// åˆå§‹åŒ– ComparisonUseCase
comparisonUC := usecase.NewComparisonUseCase(historyRepo)
```

### è·å–è®°å½•åˆ—è¡¨

```go
// è·å–æ‰€æœ‰è®°å½•
records, err := comparisonUC.GetAllRecords(ctx)
if err != nil {
    log.Fatal(err)
}

// è·å–è®°å½•å¼•ç”¨ï¼ˆè½»é‡çº§ï¼‰
refs, err := comparisonUC.GetRecordRefs(ctx)
if err != nil {
    log.Fatal(err)
}

// éå†è®°å½•å¼•ç”¨
for _, ref := range refs {
    fmt.Printf("ID: %s, DB: %s, Threads: %d, TPS: %.2f\n",
        ref.ID, ref.DatabaseType, ref.Threads, ref.TPS)
}
```

### æ‰§è¡Œå¯¹æ¯”

```go
import "github.com/whhaicheng/DB-BenchMind/internal/domain/comparison"

// é€‰æ‹©è¦å¯¹æ¯”çš„è®°å½• ID
recordIDs := []string{"hist-001", "hist-002", "hist-003"}

// é€‰æ‹©åˆ†ç»„æ–¹å¼
groupBy := comparison.GroupByThreads

// æ‰§è¡Œå¯¹æ¯”
result, err := comparisonUC.CompareRecords(ctx, recordIDs, groupBy)
if err != nil {
    log.Fatal(err)
}

// æŸ¥çœ‹ç»“æœ
fmt.Printf("å¯¹æ¯” ID: %s\n", result.ID)
fmt.Printf("è®°å½•æ•°: %d\n", len(result.Records))
fmt.Printf("åˆ†ç»„æ–¹å¼: %s\n", result.GroupBy)
```

### è®¿é—®ç»Ÿè®¡æŒ‡æ ‡

```go
// TPS ç»Ÿè®¡
if result.TPSComparison != nil {
    fmt.Printf("TPS å¹³å‡å€¼: %.2f\n", result.TPSComparison.Avg)
    fmt.Printf("TPS æ ‡å‡†å·®: %.2f\n", result.TPSComparison.StdDev)
    fmt.Printf("TPS æœ€å°å€¼: %.2f\n", result.TPSComparison.Min)
    fmt.Printf("TPS æœ€å¤§å€¼: %.2f\n", result.TPSComparison.Max)
}

// å»¶è¿Ÿç»Ÿè®¡
if result.LatencyCompare != nil {
    if result.LatencyCompare.Avg != nil {
        fmt.Printf("å¹³å‡å»¶è¿Ÿ: %.2f ms\n", result.LatencyCompare.Avg.Avg)
    }
    if result.LatencyCompare.P95 != nil {
        fmt.Printf("P95 å»¶è¿Ÿ: %.2f ms\n", result.LatencyCompare.P95.Max)
    }
    if result.LatencyCompare.P99 != nil {
        fmt.Printf("P99 å»¶è¿Ÿ: %.2f ms\n", result.LatencyCompare.P99.Max)
    }
}

// QPS ç»Ÿè®¡
if result.QPSComparison != nil {
    fmt.Printf("QPS å¹³å‡å€¼: %.2f\n", result.QPSComparison.Avg)
}

// è¯»å†™æ¯”ä¾‹
if result.ReadWriteRatio != nil {
    fmt.Printf("è¯»æŸ¥è¯¢: %d (%.1f%%)\n",
        result.ReadWriteRatio.ReadQueries,
        result.ReadWriteRatio.ReadPct)
    fmt.Printf("å†™æŸ¥è¯¢: %d (%.1f%%)\n",
        result.ReadWriteRatio.WriteQueries,
        result.ReadWriteRatio.WritePct)
}
```

### æ ¼å¼åŒ–è¾“å‡º

```go
// ç”Ÿæˆè¡¨æ ¼
table := result.FormatTable()
fmt.Println(table)

// ç”Ÿæˆ TPS æŸ±çŠ¶å›¾
tpsChart := result.FormatBarChart("TPS")
fmt.Println(tpsChart)

// ç”Ÿæˆ QPS æŸ±çŠ¶å›¾
qpsChart := result.FormatBarChart("QPS")
fmt.Println(qpsChart)
```

### è¿‡æ»¤è®°å½•

```go
import "github.com/whhaicheng/DB-BenchMind/internal/app/usecase"

// åˆ›å»ºè¿‡æ»¤å™¨
filter := &usecase.ComparisonFilter{
    DatabaseType: "MySQL",
    MinThreads:   4,
    MaxThreads:   16,
}

// åº”ç”¨è¿‡æ»¤
filteredRefs := comparisonUC.FilterRecords(ctx, refs, filter)

// éå†è¿‡æ»¤ç»“æœ
for _, ref := range filteredRefs {
    fmt.Printf("Filtered: %s (%d threads)\n", ref.DatabaseType, ref.Threads)
}
```

---

## å¯¹æ¯”åœºæ™¯

### åœºæ™¯ 1: çº¿ç¨‹æ•°å¯¹æ¯”

**ç›®æ ‡**: æ‰¾åˆ°æœ€ä½³çº¿ç¨‹æ•°é…ç½®

**æ­¥éª¤**:
1. ä½¿ç”¨ç›¸åŒé…ç½®ã€ä¸åŒçº¿ç¨‹æ•°ï¼ˆ4, 8, 16, 32ï¼‰è¿è¡Œæµ‹è¯•
2. é€‰æ‹©è¿™äº›è®°å½•ï¼ŒæŒ‰ "Threads" åˆ†ç»„
3. æŸ¥çœ‹ TPS å’Œ P99 å»¶è¿Ÿçš„å˜åŒ–è¶‹åŠ¿
4. é€‰æ‹© TPS é«˜ä¸”å»¶è¿Ÿç¨³å®šçš„é…ç½®

**é¢„æœŸç»“æœ**:
```
Threads â”‚  TPS    â”‚ P99 Latency â”‚ ç»“è®º
--------â”‚---------â”‚-------------â”‚--------
4       â”‚ 1250    â”‚ 12.5 ms     â”‚ åŸºå‡†
8       â”‚ 2100    â”‚ 15.2 ms     â”‚ âœ“ æœ€ä½³
16      â”‚ 3500    â”‚ 28.1 ms     â”‚ å»¶è¿Ÿåé«˜
32      â”‚ 3200    â”‚ 45.3 ms     â”‚ è¿‡è½½
```

### åœºæ™¯ 2: æ•°æ®åº“ç±»å‹å¯¹æ¯”

**ç›®æ ‡**: å¯¹æ¯”ä¸åŒæ•°æ®åº“çš„æ€§èƒ½

**æ­¥éª¤**:
1. åœ¨ MySQLã€PostgreSQLã€Oracle ä¸Šè¿è¡Œç›¸åŒæµ‹è¯•
2. é€‰æ‹©è¿™äº›è®°å½•ï¼ŒæŒ‰ "Database Type" åˆ†ç»„
3. å¯¹æ¯” TPSã€å»¶è¿Ÿã€èµ„æºæ¶ˆè€—

**é¢„æœŸç»“æœ**:
```
Database     â”‚ TPS    â”‚ Avg Latency â”‚ ç»“è®º
-------------â”‚---------â”‚-------------â”‚--------
MySQL        â”‚ 2100   â”‚ 7.2 ms      â”‚ é€Ÿåº¦å¿«
PostgreSQL   â”‚ 1980   â”‚ 9.1 ms      â”‚ ç¨³å®šæ€§å¥½
Oracle       â”‚ 2300   â”‚ 6.8 ms      â”‚ æ€§èƒ½æœ€ä½³
```

### åœºæ™¯ 3: æ€§èƒ½å›å½’æµ‹è¯•

**ç›®æ ‡**: ç¡®ä¿å‡çº§æ²¡æœ‰å¼•å…¥æ€§èƒ½å›å½’

**æ­¥éª¤**:
1. å‡çº§å‰è¿è¡Œæµ‹è¯•ï¼Œè®°å½• `before-upgrade`
2. å‡çº§åè¿è¡Œç›¸åŒæµ‹è¯•ï¼Œè®°å½• `after-upgrade`
3. å¯¹æ¯”è¿™ä¸¤æ¡è®°å½•
4. å…³æ³¨ TPS å˜åŒ–å’Œ P99 å»¶è¿Ÿ

**åˆ¤æ–­æ ‡å‡†**:
- TPS ä¸‹é™ < 5%: æ— å›å½’
- TPS ä¸‹é™ 5-10%: è½»å¾®å›å½’ï¼Œéœ€è¦å…³æ³¨
- TPS ä¸‹é™ > 10%: ä¸¥é‡å›å½’ï¼Œéœ€è¦è°ƒæŸ¥

### åœºæ™¯ 4: é…ç½®ä¼˜åŒ–å¯¹æ¯”

**ç›®æ ‡**: è¯„ä¼°æ•°æ®åº“é…ç½®ä¼˜åŒ–çš„æ•ˆæœ

**æ­¥éª¤**:
1. ä½¿ç”¨é»˜è®¤é…ç½®è¿è¡Œæµ‹è¯•
2. ä¼˜åŒ–é…ç½®ï¼ˆå¦‚ buffer poolã€å¹¶å‘è¿æ¥æ•°ï¼‰
3. ä½¿ç”¨ä¼˜åŒ–åçš„é…ç½®è¿è¡Œæµ‹è¯•
4. å¯¹æ¯”ä¸¤æ¬¡æµ‹è¯•ç»“æœ

### åœºæ™¯ 5: ç¡¬ä»¶å‡çº§å¯¹æ¯”

**ç›®æ ‡**: è¯„ä¼°ç¡¬ä»¶å‡çº§çš„æ€§ä»·æ¯”

**æ­¥éª¤**:
1. åœ¨æ—§ç¡¬ä»¶ä¸Šè¿è¡Œæµ‹è¯•
2. å‡çº§ç¡¬ä»¶ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ï¼‰
3. åœ¨æ–°ç¡¬ä»¶ä¸Šè¿è¡Œç›¸åŒæµ‹è¯•
4. å¯¹æ¯”æ€§èƒ½æå‡å¹…åº¦

---

## ç»“æœè§£è¯»

### TPS (Transactions Per Second)

**å®šä¹‰**: æ¯ç§’å®Œæˆçš„äº‹åŠ¡æ•°

**è§£è¯»**:
- **è¶Šé«˜è¶Šå¥½**: è¡¨ç¤ºç³»ç»Ÿååèƒ½åŠ›å¼º
- **å…³æ³¨è¶‹åŠ¿**: ä¸æ˜¯ç»å¯¹å€¼ï¼Œè€Œæ˜¯å˜åŒ–è¶‹åŠ¿
- **ç»“åˆå»¶è¿Ÿ**: TPS é«˜ä½†å»¶è¿Ÿä¹Ÿé«˜ï¼Œå¯èƒ½æ˜¯è¿‡è½½

### å»¶è¿ŸæŒ‡æ ‡ (Latency)

**Avg (å¹³å‡å»¶è¿Ÿ)**:
- æ‰€æœ‰è¯·æ±‚çš„å¹³å‡å“åº”æ—¶é—´
- å‚è€ƒï¼Œä½†ä¸å¤Ÿå…¨é¢

**P95 (95åˆ†ä½å»¶è¿Ÿ)**:
- 95% çš„è¯·æ±‚å»¶è¿Ÿä½äºæ­¤å€¼
- æ›´æ¥è¿‘ç”¨æˆ·ä½“éªŒ
- **é‡ç‚¹å…³æ³¨**

**P99 (99åˆ†ä½å»¶è¿Ÿ)**:
- 99% çš„è¯·æ±‚å»¶è¿Ÿä½äºæ­¤å€¼
- åæ˜ å°¾éƒ¨å»¶è¿Ÿ
- **SLA å…³é”®æŒ‡æ ‡**

**Min/Max**:
- æœ€å°/æœ€å¤§å»¶è¿Ÿ
- å¸®åŠ©è¯†åˆ«å¼‚å¸¸

**æ ‡å‡†å·® (StdDev)**:
- å»¶è¿Ÿæ³¢åŠ¨ç¨‹åº¦
- **è¶Šå°è¶Šå¥½**: è¡¨ç¤ºæ€§èƒ½ç¨³å®š

### QPS (Queries Per Second)

**å®šä¹‰**: æ¯ç§’æ‰§è¡Œçš„æŸ¥è¯¢æ•°

**ä¸ TPS çš„å…³ç³»**:
- QPS â‰ˆ TPS Ã— æ¯äº‹åŠ¡æŸ¥è¯¢æ•°
- OLTP åœºæ™¯: QPS é€šå¸¸ = 2 Ã— TPS (1 è¯» + 1 å†™)

### è¯»å†™æ¯”ä¾‹ (Read/Write Ratio)

**å®šä¹‰**: è¯»æŸ¥è¯¢ä¸å†™æŸ¥è¯¢çš„æ¯”ä¾‹

**è§£è¯»**:
- **Read ä¸ºä¸»** (>80%): é€‚åˆè¯»å†™åˆ†ç¦»ã€ç¼“å­˜ä¼˜åŒ–
- **Write ä¸ºä¸»** (>30%): éœ€å…³æ³¨å†™å…¥æ€§èƒ½ã€äº‹åŠ¡éš”ç¦»çº§åˆ«
- **å¹³è¡¡è¯»å†™** (50/50): ç»¼åˆä¼˜åŒ–

### ç»Ÿè®¡æŒ‡æ ‡çš„æ„ä¹‰

**æœ€å°å€¼ (Min)**:
- æœ€ä½æ€§èƒ½
- å¯èƒ½æ˜¯å¼‚å¸¸å€¼

**æœ€å¤§å€¼ (Max)**:
- æœ€é«˜æ€§èƒ½
- ç†æƒ³æƒ…å†µä¸‹çš„è¡¨ç°

**å¹³å‡å€¼ (Avg)**:
- å¹³å‡æ€§èƒ½
- å®¹æ˜“å—æç«¯å€¼å½±å“

**æ ‡å‡†å·® (StdDev)**:
- æ³¢åŠ¨ç¨‹åº¦
- **å°**: æ€§èƒ½ç¨³å®š
- **å¤§**: æ€§èƒ½ä¸ç¨³å®šï¼Œéœ€è¦ä¼˜åŒ–

---

## æœ€ä½³å®è·µ

### 1. æµ‹è¯•å‡†å¤‡

**ä¿æŒä¸€è‡´æ€§**:
- ç›¸åŒçš„æµ‹è¯•æ•°æ®é‡
- ç›¸åŒçš„æµ‹è¯•æ—¶é•¿ï¼ˆå»ºè®® â‰¥ 5 åˆ†é’Ÿï¼‰
- ç›¸åŒçš„é¢„çƒ­æ—¶é—´
- ç›¸åŒçš„ç³»ç»Ÿè´Ÿè½½ï¼ˆå°½é‡æ— å…¶ä»–è´Ÿè½½ï¼‰

**å¤šæ¬¡è¿è¡Œ**:
- æ¯ä¸ªé…ç½®è¿è¡Œ 3-5 æ¬¡
- å–å¹³å‡å€¼æˆ–ä¸­ä½æ•°
- ä¸¢å¼ƒå¼‚å¸¸å€¼

### 2. è®°å½•é€‰æ‹©

**å¯æ¯”æ€§**:
- é€‰æ‹©ç›¸åŒæ¨¡æ¿çš„è®°å½•
- é€‰æ‹©ç›¸åŒæµ‹è¯•æ—¶é•¿çš„è®°å½•
- æ³¨æ„æ•°æ®åº“ç‰ˆæœ¬å·®å¼‚

**æ•°é‡æ§åˆ¶**:
- å»ºè®® 2-5 æ¡è®°å½•
- æœ€å¤šä¸è¶…è¿‡ 10 æ¡ï¼ˆé¿å…ä¿¡æ¯è¿‡è½½ï¼‰

### 3. åˆ†ç»„é€‰æ‹©

**æŒ‰ Threads åˆ†ç»„**:
- é€‚ç”¨: çº¿ç¨‹æ•°å¯¹æ¯”ã€å¹¶å‘è°ƒä¼˜
- ä¸é€‚ç”¨: ä¸åŒæ•°æ®åº“å¯¹æ¯”

**æŒ‰ Database Type åˆ†ç»„**:
- é€‚ç”¨: æ•°æ®åº“é€‰å‹
- ä¸é€‚ç”¨: çº¿ç¨‹æ•°å¯¹æ¯”

**æŒ‰ Date åˆ†ç»„**:
- é€‚ç”¨: æ€§èƒ½è¶‹åŠ¿åˆ†æã€å›å½’æµ‹è¯•
- ä¸é€‚ç”¨: é…ç½®å¯¹æ¯”

### 4. ç»“æœåˆ†æ

**ç»¼åˆåˆ¤æ–­**:
- ä¸è¦åªçœ‹ TPS
- ç»“åˆå»¶è¿Ÿã€é”™è¯¯ç‡ã€èµ„æºæ¶ˆè€—
- è€ƒè™‘ä¸šåŠ¡åœºæ™¯éœ€æ±‚

**å…³æ³¨ç¨³å®šæ€§**:
- P99 å»¶è¿Ÿæ¯”å¹³å‡å»¶è¿Ÿæ›´é‡è¦
- æ ‡å‡†å·®è¶Šå°è¶Šå¥½
- å¤šæ¬¡è¿è¡Œç»“æœåº”è¯¥æ¥è¿‘

### 5. å¸¸è§è¯¯åŒº

**âŒ é”™è¯¯åšæ³•**:
1. åªçœ‹å¹³å‡ TPSï¼Œå¿½ç•¥ P99 å»¶è¿Ÿ
2. å¯¹æ¯”ä¸åŒæµ‹è¯•æ—¶é•¿çš„è®°å½•
3. å¯¹æ¯”ä¸åŒæ•°æ®é‡çš„è®°å½•
4. åªè¿è¡Œä¸€æ¬¡å°±ä¸‹ç»“è®º
5. å¿½ç•¥ç³»ç»Ÿè´Ÿè½½å·®å¼‚

**âœ… æ­£ç¡®åšæ³•**:
1. ç»¼åˆè€ƒè™‘ TPSã€P95ã€P99 å»¶è¿Ÿ
2. ç¡®ä¿æµ‹è¯•æ¡ä»¶ä¸€è‡´
3. å¤šæ¬¡è¿è¡Œå–å¹³å‡å€¼
4. æ§åˆ¶ç³»ç»Ÿè´Ÿè½½
5. è®°å½•å®Œæ•´çš„æµ‹è¯•ç¯å¢ƒä¿¡æ¯

---

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: "No records to compare"

**åŸå› **: æ²¡æœ‰é€‰æ‹©ä»»ä½•è®°å½•

**è§£å†³**: å‹¾é€‰è‡³å°‘ 2 æ¡è®°å½•

### é—®é¢˜ 2: "Too many records selected (max 10)"

**åŸå› **: é€‰æ‹©äº†è¶…è¿‡ 10 æ¡è®°å½•

**è§£å†³**: å–æ¶ˆéƒ¨åˆ†è®°å½•ï¼Œåªä¿ç•™å…³é”®çš„ 2-10 æ¡

### é—®é¢˜ 3: "Some records not found"

**åŸå› **: è®°å½•å·²è¢«åˆ é™¤æˆ– ID é”™è¯¯

**è§£å†³**: åˆ·æ–°è®°å½•åˆ—è¡¨ï¼Œé‡æ–°é€‰æ‹©

### é—®é¢˜ 4: å¯¹æ¯”ç»“æœä¸ç¬¦åˆé¢„æœŸ

**å¯èƒ½åŸå› **:
1. æµ‹è¯•æ¡ä»¶ä¸ä¸€è‡´
2. ç³»ç»Ÿè´Ÿè½½ä¸åŒ
3. æ•°æ®åº“çŠ¶æ€ä¸åŒï¼ˆå¦‚ç¼“å­˜ï¼‰

**è§£å†³**:
1. é‡æ–°è¿è¡Œæµ‹è¯•ï¼Œä¿æŒæ¡ä»¶ä¸€è‡´
2. å¤šæ¬¡è¿è¡Œå–å¹³å‡å€¼
3. è®°å½•è¯¦ç»†çš„æµ‹è¯•ç¯å¢ƒä¿¡æ¯

---

## è¿›é˜¶æŠ€å·§

### 1. è‡ªåŠ¨åŒ–å¯¹æ¯”è„šæœ¬

```bash
#!/bin/bash
# è‡ªåŠ¨å¯¹æ¯”æœ€æ–°ä¸¤æ¬¡æµ‹è¯•

# è·å–æœ€æ–°çš„ä¸¤æ¡è®°å½• ID
LATESTtwo=$(db-benchmind-cli list | tail -n 2 | awk '{print $2}')

# æ‰§è¡Œå¯¹æ¯”
db-benchmind-cli compare $LATEST_TWO --group-by date --output comparison.md
```

### 2. å®šæœŸå›å½’æµ‹è¯•

```bash
# æ¯å¤©å‡Œæ™¨è¿è¡Œï¼Œå¯¹æ¯”ä¸åŸºçº¿çš„å·®å¼‚
0 0 * * * /path/to/regression-test.sh
```

### 3. é›†æˆåˆ° CI/CD

```yaml
# .github/workflows/bench.yml
name: Benchmark Test
on: [push]
jobs:
  benchmark:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run Benchmark
        run: |
          db-benchmind-cli run --config sysbench-oltp.json
          db-benchmind-cli compare baseline latest --fail-on-regression 5%
```

---

## é™„å½•

### å®Œæ•´ç¤ºä¾‹ä»£ç 

```go
package main

import (
    "context"
    "fmt"
    "log"
    "os"

    "github.com/whhaicheng/DB-BenchMind/internal/app/usecase"
    "github.com/whhaicheng/DB-BenchMind/internal/domain/comparison"
    "github.com/whhaicheng/DB-BenchMind/internal/infra/database"
    "github.com/whhaicheng/DB-BenchMind/internal/infra/database/repository"
)

func main() {
    ctx := context.Background()

    // åˆå§‹åŒ–æ•°æ®åº“
    db, err := database.InitializeSQLite(ctx, "./data/db-benchmind.db")
    if err != nil {
        log.Fatal(err)
    }
    defer db.Close()

    // åˆå§‹åŒ– repository å’Œ use case
    historyRepo := repository.NewSQLiteHistoryRepository(db)
    comparisonUC := usecase.NewComparisonUseCase(historyRepo)

    // è·å–æ‰€æœ‰è®°å½•
    records, err := comparisonUC.GetAllRecords(ctx)
    if err != nil {
        log.Fatal(err)
    }
    fmt.Printf("Found %d records\n\n", len(records))

    // é€‰æ‹©æœ€è¿‘çš„ 3 æ¡è®°å½•è¿›è¡Œå¯¹æ¯”
    if len(records) < 3 {
        fmt.Println("Not enough records for comparison")
        return
    }

    recordIDs := []string{
        records[0].ID,
        records[1].ID,
        records[2].ID,
    }

    // æŒ‰çº¿ç¨‹æ•°åˆ†ç»„å¯¹æ¯”
    result, err := comparisonUC.CompareRecords(
        ctx,
        recordIDs,
        comparison.GroupByThreads,
    )
    if err != nil {
        log.Fatal(err)
    }

    // è¾“å‡ºç»“æœ
    fmt.Println(result.FormatTable())
    fmt.Println(result.FormatBarChart("TPS"))

    // ä¿å­˜åˆ°æ–‡ä»¶
    f, _ := os.Create("comparison-result.txt")
    defer f.Close()
    f.WriteString(result.FormatTable())
    f.WriteString(result.FormatBarChart("TPS"))
}
```

---

**ç‰ˆæœ¬ 1.0.0 - å®Œ**
